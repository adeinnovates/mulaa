{"remainingRequest":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/samsonaligba/Sites/mulaa.co/src/components/AddProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/samsonaligba/Sites/mulaa.co/src/components/AddProduct.vue","mtime":1568894264378},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapGetters } from 'vuex'\nexport default {\n    data(){\n        return{\n            title: '',\n            price: '',\n            discount: '',\n            discountEnable:'',\n            description: '',\n            deliveryLocations: '',\n            headers: {'Content-Type' : 'multipart/form-data'},\n            imageFile:'',\n            active: 0,\n            dialog: false,\n            loading: false,\n            rules: [v => v.length <= 50 || 'Max 50 characters'],\n            imgUrl: '',\n            uploadMsg: '',\n            infoBar: false,\n        infoMsg: '', \n        color: '',\n        date: this.dateFunction(),\n        owner: this.$store.state.userId\n        }\n    },\n    methods: {\n      dateFunction() {\n   \n            var currentDate = new Date();\n            console.log(currentDate);\n            var currentDateWithFormat = new Date().toJSON().slice(0,10).replace(/-/g,'/');\n            console.log(currentDateWithFormat);\n            return currentDateWithFormat\n     \n        },\n        fetchData(){\n          this.$store.dispatch('loadUserProducts', this.user)\n          this.$store.dispatch('loadAllProducts', 'top')\n       // this.$store.dispatch('getUser', this.user)\n    },\n      resetForm () {\n        this.$refs.uploadForm.reset()\n      },\n    reset(file, name) {\n      console.log(\"File --> \", file);\n      console.log(\"FileName -->\", name);\n    },\n    fileChange(file, name) {\n      console.log(\"File --> \", file);\n      console.log(\"FileName -->\", name);\n    },\n    onErr(err, file) {\n      console.log(\"​onErr -> file\", file);\n      console.log(\"​onErr -> err\", err);\n    },\n     onSuc(res, file) {\n      console.log(\"​onSuc -> file\", file);\n      console.log(\"​onSuc -> res\", res);\n      this.imgUrl = res.url\n      this.uploadMsg = res.message\n      \n    },\n    exceedHandler(file) {\n      console.warn(\"onExceed -> file\", file);\n    },\n    postProduct:  function() {\n                this.loading = true;\n                this.$http.post('/product', {\n                title: this.title, // + '-' + this.user,\n                content: this.description,\n                fields : {\n                  title: this.title,\n                description: this.description,\n                price: this.price,\n                discount_price: this.discount,\n                show_discount: this.discountEnable,\n                delivery_locations: this.deliveryLocations,\n                image: this.imgUrl,\n                owner : this.owner,\n                date_posted: this.date\n                },\n                 status: \"publish\"\n            }).then((response) => {\n                this.loading = false;\n                //this.clear()\n                //this.loadProducts()\n                console.log(response)\n                //this.$store.dispatch('loadAllProducts', 'top')\n                this.$store.dispatch('loadUserProducts', this.user)\n                this.color = 'green lighten-1'\n                this.infoBar = true\n              this.infoMsg = 'Product Successfully saved'\n              this.fetchData()\n            this.resetForm()\n            return\n            })\n            .catch((e) => {\n                this.loading = false;\n                console.error(e)\n                this.color = 'red darken-1'\n                this.infoBar = true\n              this.infoMsg = 'Error saving your product'\n              return\n                //this.infoBar = true\n              //this.infoMsg = 'profile update failed, try again later'\n            })\n  }\n  },\n  computed: {\n      ...mapState({\n      registerMsg:'registerMsg',\n      user:'user'\n      }),\n     disabled() {\n       if (this.imageFile.length < 1 || this.title == ' '){\n         return true\n       }\n       return false\n        //return this.imageFile.length < 1; // or === 0   \n    },\n    /*dateFunction() {\n   \n            var currentDate = new Date();\n            console.log(currentDate);\n            var currentDateWithFormat = new Date().toJSON().slice(0,10).replace(/-/g,'/');\n            console.log(currentDateWithFormat);\n            return currentDateWithFormat\n     \n    }*/\n    } \n}\n",{"version":3,"sources":["AddProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddProduct.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-dialog v-model=\"dialog\" max-width=\"700px\" class=\"extra-round extra\">\n        <template v-slot:activator=\"{ on }\">\n            <v-responsive style=\"margin-top:-30px;\">\n\n                <div class=\"text-center my-5 pt-4 mb-3\">\n                                <v-sheet color=\"transparent\" class=\"caption\">Add a new product</v-sheet>\n                                <v-spacer></v-spacer>\n                                <v-btn class=\"mx-2 mt-2\" \n                                fab \n                                dark \n                                color=\"teal lighten-3 teal--text\" \n                                v-on=\"on\"\n                                >\n                                    <v-icon dark>mdi-plus</v-icon>\n                                </v-btn>\n                </div>\n\n            </v-responsive>\n        </template>\n\n <v-card \n     class=\"mx-auto teal lighten-5\"\n            >\n             <v-snackbar v-model=infoBar :timeout=\"10000\" top right :color=\"color\" :value=infoMsg>\n  <span style=\"color:#1A227E\">{{infoMsg}}</span>\n</v-snackbar>\n\n <v-card-title>\n     <span class=\"headline font-weight-light headlineText\">\n         Create a product\n         </span>\n         </v-card-title>\n         <p class=\"teal--text mb-5 px-7 caption\">\n                    Tap the image uploader to select a photo from your phone, enter the product name below\n                </p>\n<v-container class=\"white lighten-5\">\n\n    <v-row>\n        <v-col>\n             <v-card-text class=\"pt-0\">\n             <p class=\"mb-3 mt-2 overline\">upload product image</p>\n  <img-inputer accept=\"image/*\" \n            v-model=\"imageFile\"\n            icon=\"img\"\n            upload-key=\"product\" \n            auto-upload \n            theme=\"light\"\n            no-mask\n            :capture=false\n            action=\"https://shop.mulaa.co/imgapi/prod.php\" \n            :on-error=\"onErr\"\n            :on-success=\"onSuc\"\n            placeholder = \"Drop image here or tap to add one\"\n            bottom-text=\"Drop image here or tap to add one\"\n            @reset = \"reset\"\n            />\n             </v-card-text>\n        </v-col>\n        \n        <v-col class=\"pt-0\">\n          \n<v-form\n      ref=\"uploadForm\"\n    >\n            <v-card-text class=\"pt-0\">\n                \n           <v-text-field\n           class=\"teal--text form-field mt-3\"\n            v-model=\"title\"\n            label=\"title\"\n            placeholder=\"product name\"\n            outlined\n            color=\"teal lighten-3\"\n          ></v-text-field>\n          <v-textarea\n          class=\"teal--text form-field mt-0\"\n          v-model=\"description\"\n          outlined\n          label=\"Description\"\n          value=\"Aditional product details and benefits\"\n          color=\"teal lighten-3\"\n        ></v-textarea>\n\n        <v-row>\n            <v-col>\n<v-text-field\n           class=\"teal--text form-field ma-0\"\n            v-model=\"price\"\n            label=\"price\"\n            placeholder=\"base price\"\n            type=\"number\"\n            outlined\n            color=\"teal lighten-3\"\n          ></v-text-field>\n            </v-col>\n            <v-col>\n<v-text-field\n           class=\"teal--text form-field ma-0\"\n            v-model=\"discount\"\n            label=\"discount\"\n            type=\"number\"\n            placeholder=\"discount price\"\n            outlined\n            color=\"teal lighten-3\"\n          ></v-text-field>\n            </v-col>\n\n        </v-row>\n\n        <v-switch \n        v-model=\"discountEnable\" \n        label=\"Show Discount?\" \n        class=\"mt-0\"\n        color=\"#23d2aa\"\n        >\n        </v-switch>\n            </v-card-text>\n            </v-form>\n        </v-col>\n         \n    </v-row>\n</v-container>\n<v-card-actions style=background-color:#000028>\n    <v-tooltip top>\n        <template v-slot:activator=\"{ on }\">\n            <v-btn text color=\"white\" @click=\"postProduct\" :disabled=disabled :loading=\"loading\" v-on=\"on\">\n              <v-icon right-3 color=\"teal lighten-3\" class=\"mr-2\">mdi-check</v-icon>\n             Save\n              </v-btn>\n               </template>\n      <span>Save this product</span>\n    </v-tooltip>\n               <v-btn text color=\"teal lighten-3\" @click=\"dialog = false\" v-if=\"infoBar = false\">\n              <v-icon right-3 color=\"teal lighten-3\" class=\"mr-2\">mdi-close-circle</v-icon>\n             Cancel\n              </v-btn>\n              <v-btn text color=\"teal lighten-3\" @click=\"dialog = false\" v-else>\n              <v-icon right-3 color=\"teal lighten-3\" class=\"mr-2\">mdi-close-circle</v-icon>\n             Close\n              </v-btn>\n            </v-card-actions>\n </v-card>\n       \n    </v-dialog>\n</template>\n<script>\nimport { mapState, mapGetters } from 'vuex'\nexport default {\n    data(){\n        return{\n            title: '',\n            price: '',\n            discount: '',\n            discountEnable:'',\n            description: '',\n            deliveryLocations: '',\n            headers: {'Content-Type' : 'multipart/form-data'},\n            imageFile:'',\n            active: 0,\n            dialog: false,\n            loading: false,\n            rules: [v => v.length <= 50 || 'Max 50 characters'],\n            imgUrl: '',\n            uploadMsg: '',\n            infoBar: false,\n        infoMsg: '', \n        color: '',\n        date: this.dateFunction(),\n        owner: this.$store.state.userId\n        }\n    },\n    methods: {\n      dateFunction() {\n   \n            var currentDate = new Date();\n            console.log(currentDate);\n            var currentDateWithFormat = new Date().toJSON().slice(0,10).replace(/-/g,'/');\n            console.log(currentDateWithFormat);\n            return currentDateWithFormat\n     \n        },\n        fetchData(){\n          this.$store.dispatch('loadUserProducts', this.user)\n          this.$store.dispatch('loadAllProducts', 'top')\n       // this.$store.dispatch('getUser', this.user)\n    },\n      resetForm () {\n        this.$refs.uploadForm.reset()\n      },\n    reset(file, name) {\n      console.log(\"File --> \", file);\n      console.log(\"FileName -->\", name);\n    },\n    fileChange(file, name) {\n      console.log(\"File --> \", file);\n      console.log(\"FileName -->\", name);\n    },\n    onErr(err, file) {\n      console.log(\"​onErr -> file\", file);\n      console.log(\"​onErr -> err\", err);\n    },\n     onSuc(res, file) {\n      console.log(\"​onSuc -> file\", file);\n      console.log(\"​onSuc -> res\", res);\n      this.imgUrl = res.url\n      this.uploadMsg = res.message\n      \n    },\n    exceedHandler(file) {\n      console.warn(\"onExceed -> file\", file);\n    },\n    postProduct:  function() {\n                this.loading = true;\n                this.$http.post('/product', {\n                title: this.title, // + '-' + this.user,\n                content: this.description,\n                fields : {\n                  title: this.title,\n                description: this.description,\n                price: this.price,\n                discount_price: this.discount,\n                show_discount: this.discountEnable,\n                delivery_locations: this.deliveryLocations,\n                image: this.imgUrl,\n                owner : this.owner,\n                date_posted: this.date\n                },\n                 status: \"publish\"\n            }).then((response) => {\n                this.loading = false;\n                //this.clear()\n                //this.loadProducts()\n                console.log(response)\n                //this.$store.dispatch('loadAllProducts', 'top')\n                this.$store.dispatch('loadUserProducts', this.user)\n                this.color = 'green lighten-1'\n                this.infoBar = true\n              this.infoMsg = 'Product Successfully saved'\n              this.fetchData()\n            this.resetForm()\n            return\n            })\n            .catch((e) => {\n                this.loading = false;\n                console.error(e)\n                this.color = 'red darken-1'\n                this.infoBar = true\n              this.infoMsg = 'Error saving your product'\n              return\n                //this.infoBar = true\n              //this.infoMsg = 'profile update failed, try again later'\n            })\n  }\n  },\n  computed: {\n      ...mapState({\n      registerMsg:'registerMsg',\n      user:'user'\n      }),\n     disabled() {\n       if (this.imageFile.length < 1 || this.title == ' '){\n         return true\n       }\n       return false\n        //return this.imageFile.length < 1; // or === 0   \n    },\n    /*dateFunction() {\n   \n            var currentDate = new Date();\n            console.log(currentDate);\n            var currentDateWithFormat = new Date().toJSON().slice(0,10).replace(/-/g,'/');\n            console.log(currentDateWithFormat);\n            return currentDateWithFormat\n     \n    }*/\n    } \n}\n</script>\n<style>\n    .headlineText{\n        color: #000028;\n    }\n     .img-inputer.img-inputer--light, .img-inputer.img-inputer--{\n        width:270px !important;\n        height:250px;\n        border: 1px solid #ffffff !important;\n    }\n    .img-inputer__preview-box.clear{\n        display: none !important;\n    }\n</style>"]}]}