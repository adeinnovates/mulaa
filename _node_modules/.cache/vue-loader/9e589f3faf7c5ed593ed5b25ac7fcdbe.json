{"remainingRequest":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/samsonaligba/Sites/mulaa.co/src/views/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/samsonaligba/Sites/mulaa.co/src/views/User.vue","mtime":1575388602492},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/samsonaligba/Sites/mulaa.co/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapGetters } from 'vuex'\nimport Buy from '@/components/BuyProduct'\nimport Widget from '@/components/GetWidget'\nimport Avatar from 'vue-avatar'\n\nimport axios from 'axios'\n\nconst storeName = window.location.host.split('.')[0];\n\nexport default {\n  metaInfo() {\n    let pageTitle = this.nname\n    return {\n      title: pageTitle ? pageTitle : this.getMerchant,\n      titleTemplate: '%s - mulaa.co',\n      htmlAttrs: {\n        lang: 'en',\n        amp: true\n      },\n      \n      meta: [\n     {property: 'og:title', content: storeName },\n     {property: 'og:type', content: 'profile:'+window.location.host.split('.')[0]},\n     {property: 'og:url', content: 'https://'+window.location.host},\n     {property: 'og:image', content: 'https://mulaa.store/mulaa_pf.gif'}, //this.getMerchantInfo.brand_image\n     {property: 'og:description', content: this.getMerchantInfo.business_description},\n      ]\n    }\n    },\n    components: {\n       Avatar,\n       Widget\n       // Buy\n  },\n  props: ['name','theproducts']\n   /* props: {\n       name: {\n            type: String,\n            default: 'No User Found'\n        },\n\n    }*/,\n     data(){\n        return{\n          contentloaded:true,\n          limitVal: 1,\n          nname: '',\n          showWidget: false,\n          inputs: [\n            {\n                name: ''\n            }\n        ],\n            search:'',\n            showSearch: false,\n            overlay:false,\n            userdata: this.$route.params.name,\n            dialog: false,\n            rules: [v => v.length <= 50 || 'Max 50 characters'],\n            uploadMsg: '',\n            infoBar: false,\n            infoMsg: '', \n            products: '',\n            bizPhone: '',\n            merchantName : '',\n            instagram: 'https://instagram.com/',\n            pagePath: 'https://shop.mulaa.co'+ this.$route.path,\n            skk: process.env.VUE_APP_SECRET_KEY\n        }\n    },\n    computed: {\n        ...mapGetters([\n             'renderUser'\n           ]),\n      ...mapState({\n          emptyStore: 'emptyStore',\n      registerMsg:'registerMsg',\n      color:'color',\n      show:'show',\n      loading:'loading',\n      user:'user',\n      userDesc:'userDesc',\n      userKey:'userKey',\n      userBusiness:'userBusiness',\n      userPhone:'userPhone',\n      myproducts:'myproducts',\n      userProducts:'userProducts',\n      Discounted:'Discounted',\n      userUrl:'userUrl',\n      userImage:'userImage',\n      userDetails: 'userDetails',\n      userLinks: 'userLinks',\n      emptyLinks:'emptyLinks'\n      }),\n    snackbar: {\n      get() {\n        return this.$store.state.snackbar;\n      },\n      set(value) {\n        this.$store.commit('snackbar', value);\n      }\n    },\n    loading: {\n      get() {\n        return this.$store.state.loading;\n      },\n      set(value) {\n        this.$store.commit('loading', value);\n      }\n    },\n    merchantData: {\n    get: function() {\n      //concat using template literal\n      //return `https://mulaa.me/u/${this.$route.params.name}`\n      return this.$store.state.userDetails;\n    },\n      set(value) {\n        this.$store.commit('userDetails', value);\n      }\n  },\n   \n    filteredProducts: function(){\n\n      if(this.userProducts != ''){\n        //console.log('reddd')\n      return this.userProducts.filter((userproduct) => {\n      //return userproduct.title.match(this.search) || userproduct.price.match(this.search)\n      return userproduct.productID.toString().match(this.search)\n      })\n      }else{\n        //console.log('No products yet')\n        return null\n      }\n    \n    },\n    filterHiddenProduct: function(){\n      if(this.filteredProducts != null){\n return this.filteredProducts.filter(function(product) {\n\t\t\t\t\treturn product.hidden < 1 || product.hidden == false;\n\t\t\t\t});\n      }else{\n        return null\n      }\n     \n    }, \n     userInstagram: function(){\n       \n       if(this.userDetails.instagram != undefined){\n         //console.log('reddd ig')\n       if(this.userDetails.instagram.includes('@') == true){\n         \n      const IG = this.userDetails.instagram\n      const IGnameSplit = IG.split('@')\n      const use = IGnameSplit[1]\n     // console.log(IGnameSplit)\n      return 'https://instagram.com/'+use\n       }else if(this.userDetails.instagram){\n          return 'https://instagram.com/'+this.userDetails.instagram\n       }\n       }else{\n    return '#'\n       }\n   \n      \n\n     // return this.userDetails.instagram\n     },\n    \n    },\n    mounted() {\n      //console.log('name mounted: '+this.nname)\n        this.getUserPhone()\n        this.isPageOwner()\n        //this.fetchLinks(this.name)\n    },\n     created() {\n       const host = window.location.host;\nconst parts = host.split('.');\nconst domain = 'mulaa'\nthis.nname = parts[0]\n       //console.log('name created: '+parts[0])\n        this.fetchData(parts[0])\n       // console.log('name: '+ this.name)\n    },\n     watch: {\n    // call again the method if the route changes\n    getUserPhone(){\nthis.bizPhone = 'https://api.whatsapp.com/send?phone=234'+this.userDetails.phone_number\n    },\n    emptyLinks(val){\n      if(val == true){\n        return\n      }\n      return\n    },\n    getMerchantInfo(){\n      return\n    },\n    userDetails(val){\n      //console.log('details updated')\n      return this.userLimit()\n      //return\n    }\n  },\n    methods: {\n      userLimit(){\n       \nconst config = {\n            headers: {'Authorization': 'Bearer '+this.skk}\n            }\n            let cus_code = this.userDetails.customer_code\n            let exclude_transactions = true\n         if(this.userDetails.paid_user != true){ \n            this.limitVal = 1\n            this.contentloaded = false\n            //console.log('base: '+this.userDetails.subscription)\n          }else {\n            axios.get('https://api.paystack.co/customer/'+cus_code, config)\n        .then(resp => { \n            const trxData = resp.data.data//.subscriptions\n            if(trxData.subscriptions[0] != undefined){\n              this.contentloaded = false\n              this.limitVal = 65\n              this.showSearch = true\n              //console.log(trxData.subscriptions[0])\n            }else{\n              this.contentloaded = false\n              this.limitVal = 3\n              console.log(this.name)\n              if(this.name = 'foodfashionplug'){\n                this.limitVal = 65\n                this.showSearch = true \n              }\n              //console.log(trxData.subscriptions[0])\n            }\n            //console.log(trxData)\n             /*\n             if(trxData[0].status == 'active'){\n                this.limitVal = 65\n             }\n             else {\n               this.limitVal = 3\n             }\n             */\n        }).catch(err => {\n          this.contentloaded = false\n            console.log(err)   \n            })\n          }\nreturn\n    },\n       isPageOwner: function(){\n       if (this.$store.getters.isLoggedIn != true){\n           //return console.log('not logged in')\n       }else{\n         //console.log('render user: '+ this.$store.getters.renderUser)\n         //console.log(this.name)\n         if(this.nname == this.$store.getters.renderUser){\n            return this.showWidget = true\n         }\n         //return console.log('loggedin user: '+ this.$store.getters.isLoggedIn)\n       }\n     },\n    fetchData(nname){\n      //console.log('this user '+this.name)\n        this.$store.dispatch('loadUserProducts', nname)\n        this.$store.dispatch('loadUserDetails', nname)\n        this.$store.dispatch('loadDashboardLinks', nname)\n       // console.log('Name '+this.name)\n    },\n    getMerchant(){\n      return this.userBusiness\n    },\n    getMerchantInfo(){\n      return this.userDetails\n    },\n    getUserPhone(){\nthis.bizPhone = 'https://api.whatsapp.com/send?phone=234'+this.userDetails.phone_number\n    },\n    fetchLinks(val){\n      const linkURL = 'https://shop.mulaa.co/api/wp-json/mulaa-link/v1/links'\n        //return new Promise((resolve, reject) => {\n      \n      if (val != ''){\n        this.$http.get(`${linkURL}`+'?author='+val+'&skip_cache=1')\n        .then(resp => { \n          if(resp.data.length > 0){\n            const user_links = resp.data\n            //const authorID = resp.data.theAuthor\n            \n            console.log('links method: '+JSON.stringify(resp.data))\n          }else {\n           // console.log('No links')\n            \n            return\n          }\n          return\n          //resolve(resp)\n        })\n        .catch(err => {\n          \n          console.log(err)\n          //reject(err)\n        })\n      }else {console.log('An error occured loading links data, try again later')}\n    //})\n    }\n    \n  }\n    \n}\n",{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4RA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"User.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"userpage products fill-height grey lighten-4 pa-5 page\">\n      <v-sheet\n      id=\"scroll-area-2\"\n      class=\"overflow-y-auto\"\n     color=\"transparent\"\n    >\n        <v-container>\n          <div \n          class=\"text-right small text-uppercase\"\n          v-show=\"showWidget\"\n          >\n        \n          <Widget\n          :thisUser=\"userDetails\"\n          >\n\n          </Widget>\n         <!-- <v-icon small color=\"teal\">\n              mdi-settings\n              </v-icon>\n              Widget -->\n          </div>\n                <div class=\"text-center\">\n                  \n              <v-avatar class=\"my-2\" size=\"80\">\n                <avatar :username=this.user \n                  :rounded=true\n                  :src=this.userDetails.brand_image\n                  :size=80\n                  background-color=\"#23d2aa\"\n                  ></avatar>\n                </v-avatar>\n                <p class=\"title black--text darken-2 font-weight-black\">\n                        {{this.userDetails.business_name}}\n                    </p>\n                     <v-divider width=40% class=\"align-center d-block\" style=\"margin: 0 auto\"></v-divider>\n                     <p class=\"mt-3 mb-3 caption grey--text text--darken-3\" style=\"max-width:350px;margin:0 auto\"> {{this.userDetails.business_description}}</p>\n                </div>\n                <!--<v-row justify=\"center\" class=\"mb-4\">\n                    <v-btn small \n                    rounded \n                    class=\"mt-3 grad-bg2\"\n                   :href=\"bizPhone\"\n                    >\n                        <v-icon left>mdi-whatsapp</v-icon>\n                       <span class=\"caption dark-body-text\"> chat</span> \n                        </v-btn> \n                </v-row> -->\n                <!--<v-row justify=\"center\" class=\"mb-4\">\n                    <v-btn\n                    small\n                    block\n                    text\n                    href=\"\"\n                    height=\"32\"\n                    class=\"grey--text darken-2 caption grad-bg2 mb-1\"\n                    >\n                         <span class=\"caption dark-body-text\">\n                             website\n                         </span>\n                        </v-btn>\n                </v-row>\n                -->\n\n                 <v-progress-linear\n                            :active=loading\n                            indeterminate\n                            color=\"green\"\n                            ></v-progress-linear> \n                            <div v-if=\"emptyStore\" class=\"mb-10 mx-auto\">\n                                 <v-img :src=\"require('../assets/unsuccessful.svg')\" class=\"i450img mx-auto\"></v-img>\n                  <p class=\"title text-center font-weight-light mb-2 pa-3 red mx-auto\">\n                  This profile is currently empty\n                  </p>\n                            </div>\n                <div v-else> \n\n                  <div v-if=\"!emptyLinks\" id=\"links\" \n                          class=\"mb-3 mt-2 pa-3 mx-auto\"\n                          style=\"border:3px dotted rgba(178, 223, 219, 0.3);background-color:rgba(178, 223, 219, 0.2);\n                          border-radius:4px;max-width:854px;\"\n                          >\n                          <p class=\"overline mb-2\"><v-icon small left>mdi-cursor-default-click-outline</v-icon> My links</p>\n                         <!-- <v-progress-linear\n                            :active=loadinglist\n                            indeterminate\n                            color=\"green\"\n                            ></v-progress-linear>-->\n                          <v-card\n                          color=\"#000028\"\n                          dark\n                          class=\"mb-3\"\n                          \n                          v-for=\"link in userLinks.slice(0, 4)\" :key=\"link.linkID\"\n                          >\n                              <a :href=\"link.short_link\" target=\"_blank\" class=\"white--text noline\">\n                          <v-card-title\n                          class=\"mt-0 subtitle-1 py-2\"\n                          \n                          >\n                          <v-icon small left class=\"teal--text lighten-1\">\n              mdi-vector-link\n              </v-icon>\n                          <span class=\"title text-center\" style=\"width:80%;\">\n                            {{link.link_title}}\n                            </span>\n                          <v-spacer></v-spacer>\n                         \n                          </v-card-title>\n                          </a>\n                          </v-card>\n                  </div>\n                <div class=\"layout-desktop mx-auto\" style=\"max-width:854px;\">\n                <v-layout row wrap mx-auto>\n                <v-flex xs7 sm7 md8 lg9>\n                <p class=\"overline mb-0 mt-6\"><v-icon small left>mdi-shopping-outline</v-icon> My products</p>\n                </v-flex>\n                <v-flex xs5 sm5 md4 lg3 text-right>\n               <!-- <v-btn\n                icon\n                >\n                <v-icon right>mdi-magnify</v-icon>\n                </v-btn> -->\n                <v-text-field\n            \n            append-icon=\"mdi-magnify\"\n            class=\"\"\n            v-model=\"search\" :clearable=true\n            color= teal\n            placeholder=\"Product No.\"\n            v-show=\"showSearch\"\n          ></v-text-field>\n                </v-flex>\n                </v-layout>\n\n                </div>\n        <v-layout row wrap pt-2 class=\"layout-desktop mx-auto\" style=\"max-width:854px;\">\n                           \n                         \n                           <v-flex xs6 sm6 md4 lg4 v-for=\"product in filterHiddenProduct.slice(0, limitVal)\" :key=\"product.productID\">\n           <transition name=\"slide-fade\" mode=\"out-in\">\n            \n            <v-card flat hover class=\"text-xs-center ma-2\" transition=\"slide-x-transition\"\n            style=\"border-radius:10px;\"\n            >\n            \n              <router-link\n              :to=\"{\n                   name: 'product',\n                   params: {\n                       id: product.productID,\n                       theproducts:product,\n                   }\n               }\"\n              >\n              \n            \n              <v-responsive class=\"pt-0\" style=\"border-radius:10px;\">\n\n                <v-img\n          :src=\"product.image\"\n          aspect-ratio=\"1.15\"\n          lazy-src=\"https://picsum.photos/id/1002/10/6\"\n         >\n              <div v-show=\"product.stock == 0\" class=\"outofstock\">\n              <v-chip\n              class=\"ma-2 point text-uppercase font-weight-black\"\n              color=\"red\"\n              label\n              small\n              text-color=\"white\"\n              >\n              <v-icon small left>mdi-cart-off</v-icon>\n              sold out\n              </v-chip>\n              </div><!-- hidden / out of stock-->\n            <template v-slot:placeholder>\n            <v-row\n            class=\"fill-height ma-0\" \n            align=\"center\"\n            justify=\"center\"\n            >\n            <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n            </v-row>\n            </template>\n         </v-img>\n              </v-responsive>\n             \n              </router-link>\n                 \n              <!--<v-card-text>\n                <div class=\"subheading text-truncate\">\n                  {{product.title.rendered}}\n                </div>\n                <div class=\"grey--text text-truncate\"> {{product.acf.description}}</div>\n              </v-card-text>-->  <!--<Buy :theproducts=\"product\">\n\n                </Buy>-->\n               \n              <v-card-actions>\n                  \n               <v-btn text color=\"#23d2aa\" \n               class=\"caption\"\n               :to=\"{\n                   name: 'product',\n                   params: {\n                       id: product.productID,\n                       theproducts:product,\n                   }\n               }\"\n                >\n                  <v-icon small left>mdi-cart</v-icon>\n                  ₦{{product.price}}\n                  <!--Buy-->\n                </v-btn>\n                \n               \n               \n                <v-spacer></v-spacer>\n                <div class=\"grey--text text--darken-3 overline\"> \n                  <!--sku {{product.productID}}-->\n                  <v-chip outlined x-small>\n                  #{{product.productID}}\n                  </v-chip>\n                  </div>\n              </v-card-actions>\n             \n              </v-card>\n              \n              </transition>\n              \n        </v-flex>\n       \n       <v-flex xs6 sm6 md4 lg4 v-for=\"(product, index) in filterHiddenProduct\" :key=\"`product-${index}`\" v-show=\"contentloaded\">\n        <v-skeleton-loader\n      class=\"mx-auto\"\n      max-width=\"300\"\n      type=\"card\"\n    ></v-skeleton-loader>\n        </v-flex>\n                       </v-layout>\n                        </div>\n        </v-container>\n        </v-sheet>\n       <v-row justify=\"center\" class=\"mb-10\"> \n           <p class=\"caption text--grey my-5\" style=\"margin: 0 auto\">\n             \npowered by <a href=\"https://mulaa.co/?utm_source=footer&utm_medium=userpage\" target=\"_blank\"><img :src=\"require('../assets/mulaalogo.png')\" alt=\"\" style=\"max-width:70px;margin-left:5px\">\n         </a>  </p>\n        \n       </v-row>\n\n       <v-bottom-navigation\n      scroll-target=\"#scroll-area-2\"\n      hide-on-scroll\n      scroll-threshold=\"50\"\n      fixed\n      color=\"#000028\"\n      horizontal\n    >\n      <v-btn\n      :href=\"bizPhone\"\n      >\n        <span>Chat</span>\n        <v-icon>mdi-whatsapp</v-icon>\n      </v-btn>\n\n      <v-btn>\n        <span>Email</span>\n        <v-icon>mdi-email-outline</v-icon>\n      </v-btn>\n<!-- :href=\"`${userInstagram}`\" -->\n      <v-btn\n      :href=\"`${userInstagram}`\"\n      target=\"_blank\"\n      >\n        <span>Instagram</span>\n        <v-icon>mdi-instagram</v-icon>\n      </v-btn>\n    </v-bottom-navigation>\n    </div>\n</template>\n<script>\nimport { mapState, mapGetters } from 'vuex'\nimport Buy from '@/components/BuyProduct'\nimport Widget from '@/components/GetWidget'\nimport Avatar from 'vue-avatar'\n\nimport axios from 'axios'\n\nconst storeName = window.location.host.split('.')[0];\n\nexport default {\n  metaInfo() {\n    let pageTitle = this.nname\n    return {\n      title: pageTitle ? pageTitle : this.getMerchant,\n      titleTemplate: '%s - mulaa.co',\n      htmlAttrs: {\n        lang: 'en',\n        amp: true\n      },\n      \n      meta: [\n     {property: 'og:title', content: storeName },\n     {property: 'og:type', content: 'profile:'+window.location.host.split('.')[0]},\n     {property: 'og:url', content: 'https://'+window.location.host},\n     {property: 'og:image', content: 'https://mulaa.store/mulaa_pf.gif'}, //this.getMerchantInfo.brand_image\n     {property: 'og:description', content: this.getMerchantInfo.business_description},\n      ]\n    }\n    },\n    components: {\n       Avatar,\n       Widget\n       // Buy\n  },\n  props: ['name','theproducts']\n   /* props: {\n       name: {\n            type: String,\n            default: 'No User Found'\n        },\n\n    }*/,\n     data(){\n        return{\n          contentloaded:true,\n          limitVal: 1,\n          nname: '',\n          showWidget: false,\n          inputs: [\n            {\n                name: ''\n            }\n        ],\n            search:'',\n            showSearch: false,\n            overlay:false,\n            userdata: this.$route.params.name,\n            dialog: false,\n            rules: [v => v.length <= 50 || 'Max 50 characters'],\n            uploadMsg: '',\n            infoBar: false,\n            infoMsg: '', \n            products: '',\n            bizPhone: '',\n            merchantName : '',\n            instagram: 'https://instagram.com/',\n            pagePath: 'https://shop.mulaa.co'+ this.$route.path,\n            skk: process.env.VUE_APP_SECRET_KEY\n        }\n    },\n    computed: {\n        ...mapGetters([\n             'renderUser'\n           ]),\n      ...mapState({\n          emptyStore: 'emptyStore',\n      registerMsg:'registerMsg',\n      color:'color',\n      show:'show',\n      loading:'loading',\n      user:'user',\n      userDesc:'userDesc',\n      userKey:'userKey',\n      userBusiness:'userBusiness',\n      userPhone:'userPhone',\n      myproducts:'myproducts',\n      userProducts:'userProducts',\n      Discounted:'Discounted',\n      userUrl:'userUrl',\n      userImage:'userImage',\n      userDetails: 'userDetails',\n      userLinks: 'userLinks',\n      emptyLinks:'emptyLinks'\n      }),\n    snackbar: {\n      get() {\n        return this.$store.state.snackbar;\n      },\n      set(value) {\n        this.$store.commit('snackbar', value);\n      }\n    },\n    loading: {\n      get() {\n        return this.$store.state.loading;\n      },\n      set(value) {\n        this.$store.commit('loading', value);\n      }\n    },\n    merchantData: {\n    get: function() {\n      //concat using template literal\n      //return `https://mulaa.me/u/${this.$route.params.name}`\n      return this.$store.state.userDetails;\n    },\n      set(value) {\n        this.$store.commit('userDetails', value);\n      }\n  },\n   \n    filteredProducts: function(){\n\n      if(this.userProducts != ''){\n        //console.log('reddd')\n      return this.userProducts.filter((userproduct) => {\n      //return userproduct.title.match(this.search) || userproduct.price.match(this.search)\n      return userproduct.productID.toString().match(this.search)\n      })\n      }else{\n        //console.log('No products yet')\n        return null\n      }\n    \n    },\n    filterHiddenProduct: function(){\n      if(this.filteredProducts != null){\n return this.filteredProducts.filter(function(product) {\n\t\t\t\t\treturn product.hidden < 1 || product.hidden == false;\n\t\t\t\t});\n      }else{\n        return null\n      }\n     \n    }, \n     userInstagram: function(){\n       \n       if(this.userDetails.instagram != undefined){\n         //console.log('reddd ig')\n       if(this.userDetails.instagram.includes('@') == true){\n         \n      const IG = this.userDetails.instagram\n      const IGnameSplit = IG.split('@')\n      const use = IGnameSplit[1]\n     // console.log(IGnameSplit)\n      return 'https://instagram.com/'+use\n       }else if(this.userDetails.instagram){\n          return 'https://instagram.com/'+this.userDetails.instagram\n       }\n       }else{\n    return '#'\n       }\n   \n      \n\n     // return this.userDetails.instagram\n     },\n    \n    },\n    mounted() {\n      //console.log('name mounted: '+this.nname)\n        this.getUserPhone()\n        this.isPageOwner()\n        //this.fetchLinks(this.name)\n    },\n     created() {\n       const host = window.location.host;\nconst parts = host.split('.');\nconst domain = 'mulaa'\nthis.nname = parts[0]\n       //console.log('name created: '+parts[0])\n        this.fetchData(parts[0])\n       // console.log('name: '+ this.name)\n    },\n     watch: {\n    // call again the method if the route changes\n    getUserPhone(){\nthis.bizPhone = 'https://api.whatsapp.com/send?phone=234'+this.userDetails.phone_number\n    },\n    emptyLinks(val){\n      if(val == true){\n        return\n      }\n      return\n    },\n    getMerchantInfo(){\n      return\n    },\n    userDetails(val){\n      //console.log('details updated')\n      return this.userLimit()\n      //return\n    }\n  },\n    methods: {\n      userLimit(){\n       \nconst config = {\n            headers: {'Authorization': 'Bearer '+this.skk}\n            }\n            let cus_code = this.userDetails.customer_code\n            let exclude_transactions = true\n         if(this.userDetails.paid_user != true){ \n            this.limitVal = 1\n            this.contentloaded = false\n            //console.log('base: '+this.userDetails.subscription)\n          }else {\n            axios.get('https://api.paystack.co/customer/'+cus_code, config)\n        .then(resp => { \n            const trxData = resp.data.data//.subscriptions\n            if(trxData.subscriptions[0] != undefined){\n              this.contentloaded = false\n              this.limitVal = 65\n              this.showSearch = true\n              //console.log(trxData.subscriptions[0])\n            }else{\n              this.contentloaded = false\n              this.limitVal = 3\n              console.log(this.name)\n              if(this.name = 'foodfashionplug'){\n                this.limitVal = 65\n                this.showSearch = true \n              }\n              //console.log(trxData.subscriptions[0])\n            }\n            //console.log(trxData)\n             /*\n             if(trxData[0].status == 'active'){\n                this.limitVal = 65\n             }\n             else {\n               this.limitVal = 3\n             }\n             */\n        }).catch(err => {\n          this.contentloaded = false\n            console.log(err)   \n            })\n          }\nreturn\n    },\n       isPageOwner: function(){\n       if (this.$store.getters.isLoggedIn != true){\n           //return console.log('not logged in')\n       }else{\n         //console.log('render user: '+ this.$store.getters.renderUser)\n         //console.log(this.name)\n         if(this.nname == this.$store.getters.renderUser){\n            return this.showWidget = true\n         }\n         //return console.log('loggedin user: '+ this.$store.getters.isLoggedIn)\n       }\n     },\n    fetchData(nname){\n      //console.log('this user '+this.name)\n        this.$store.dispatch('loadUserProducts', nname)\n        this.$store.dispatch('loadUserDetails', nname)\n        this.$store.dispatch('loadDashboardLinks', nname)\n       // console.log('Name '+this.name)\n    },\n    getMerchant(){\n      return this.userBusiness\n    },\n    getMerchantInfo(){\n      return this.userDetails\n    },\n    getUserPhone(){\nthis.bizPhone = 'https://api.whatsapp.com/send?phone=234'+this.userDetails.phone_number\n    },\n    fetchLinks(val){\n      const linkURL = 'https://shop.mulaa.co/api/wp-json/mulaa-link/v1/links'\n        //return new Promise((resolve, reject) => {\n      \n      if (val != ''){\n        this.$http.get(`${linkURL}`+'?author='+val+'&skip_cache=1')\n        .then(resp => { \n          if(resp.data.length > 0){\n            const user_links = resp.data\n            //const authorID = resp.data.theAuthor\n            \n            console.log('links method: '+JSON.stringify(resp.data))\n          }else {\n           // console.log('No links')\n            \n            return\n          }\n          return\n          //resolve(resp)\n        })\n        .catch(err => {\n          \n          console.log(err)\n          //reject(err)\n        })\n      }else {console.log('An error occured loading links data, try again later')}\n    //})\n    }\n    \n  }\n    \n}\n</script>\n<style>\n.outofstock{\n  \n   filter: alpha(opacity=80);\n  /* Modern Browsers */\n  opacity: 0.8;\n}\n.outofstock::before {   /* Added */\n  content: '';\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color:transparent;\n  transition: 0.5s;\n}\n.outofstock.point{\n  position: absolute;\n  z-index:9999;\n}\n[style*=\"--aspect-ratio\"] > :first-child {\n  width: 100%;\n}\n[style*=\"--aspect-ratio\"] > img {  \n  height: auto;\n} \n@supports (--custom:property) {\n  [style*=\"--aspect-ratio\"] {\n    position: relative;\n  }\n  [style*=\"--aspect-ratio\"]::before {\n    content: \"\";\n    display: block;\n    padding-bottom: calc(100% / (var(--aspect-ratio)));\n  }  \n  [style*=\"--aspect-ratio\"] > :first-child {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n  }  \n}\n\na.noline{\n  text-decoration: none;\n}\na.noline:hover{\n  color: #B2DFDB;\n}\n    .slide-fade-enter-active {\n  transition: all .3s ease;\n}\n.slide-fade-leave-active {\n  transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n.slide-fade-enter, .slide-fade-leave-to\n/* .slide-fade-leave-active for <2.1.8 */ {\n  transform: translateX(10px);\n  opacity: 0;\n}\n/*\n.layout-desktop{\n  border-radius: 25px 25px 0 0;\n  background-color:#fff;\n  padding: 20px 5px 0px 5px !important;\n}\n*/\n.i450img{\n  max-width:450px;\n}\n\n@media (max-width: 360px) {\n\n  .v-application .pa-5.userpage{\n    padding: 1px !important;\n  }\n  \n}\n</style>"]}]}